import React, { useEffect, useState } from 'react'
import { Keyboard, StyleSheet, TouchableWithoutFeedback, View, Text, FlatList, TouchableOpacity } from 'react-native'
import CustomButton from './CustomButton'
import { TextInput } from 'react-native-paper'
import { COLORS, FLEX_CENTERED, TEXT_STYLES } from '../style'
import StyleText from './StyleText'
const COUNTRIES = [
    { "id": "1", "title": "ğŸ‡¦ğŸ‡« Afghanistan" },
    { "id": "2", "title": "ğŸ‡¦ğŸ‡± Albania" },
    { "id": "3", "title": "ğŸ‡©ğŸ‡¿ Algeria" },
    { "id": "4", "title": "ğŸ‡¦ğŸ‡© Andorra" },
    { "id": "5", "title": "ğŸ‡¦ğŸ‡´ Angola" },
    { "id": "6", "title": "ğŸ‡¦ğŸ‡¬ Antigua and Barbuda" },
    { "id": "7", "title": "ğŸ‡¦ğŸ‡· Argentina" },
    { "id": "8", "title": "ğŸ‡¦ğŸ‡² Armenia" },
    { "id": "9", "title": "ğŸ‡¦ğŸ‡º Australia" },
    { "id": "10", "title": "ğŸ‡¦ğŸ‡¹ Austria" },
    { "id": "11", "title": "ğŸ‡¦ğŸ‡¿ Azerbaijan" },
    { "id": "12", "title": "ğŸ‡§ğŸ‡¸ Bahamas" },
    { "id": "13", "title": "ğŸ‡§ğŸ‡­ Bahrain" },
    { "id": "14", "title": "ğŸ‡§ğŸ‡© Bangladesh" },
    { "id": "15", "title": "ğŸ‡§ğŸ‡§ Barbados" },
    { "id": "16", "title": "ğŸ‡§ğŸ‡¾ Belarus" },
    { "id": "17", "title": "ğŸ‡§ğŸ‡ª Belgium" },
    { "id": "18", "title": "ğŸ‡§ğŸ‡¿ Belize" },
    { "id": "19", "title": "ğŸ‡§ğŸ‡¯ Benin" },
    { "id": "20", "title": "ğŸ‡§ğŸ‡¹ Bhutan" },
    { "id": "21", "title": "ğŸ‡§ğŸ‡´ Bolivia" },
    { "id": "22", "title": "ğŸ‡§ğŸ‡¦ Bosnia and Herzegovina" },
    { "id": "23", "title": "ğŸ‡§ğŸ‡¼ Botswana" },
    { "id": "24", "title": "ğŸ‡§ğŸ‡· Brazil" },
    { "id": "25", "title": "ğŸ‡§ğŸ‡³ Brunei" },
    { "id": "26", "title": "ğŸ‡§ğŸ‡¬ Bulgaria" },
    { "id": "27", "title": "ğŸ‡§ğŸ‡« Burkina Faso" },
    { "id": "28", "title": "ğŸ‡§ğŸ‡® Burundi" },
    { "id": "29", "title": "ğŸ‡¨ğŸ‡» Cape Verde" },
    { "id": "30", "title": "ğŸ‡°ğŸ‡­ Cambodia" },
    { "id": "31", "title": "ğŸ‡¨ğŸ‡² Cameroon" },
    { "id": "32", "title": "ğŸ‡¨ğŸ‡¦ Canada" },
    { "id": "33", "title": "ğŸ‡¨ğŸ‡« Central African Republic" },
    { "id": "34", "title": "ğŸ‡¹ğŸ‡© Chad" },
    { "id": "35", "title": "ğŸ‡¨ğŸ‡± Chile" },
    { "id": "36", "title": "ğŸ‡¨ğŸ‡³ China" },
    { "id": "37", "title": "ğŸ‡¨ğŸ‡´ Colombia" },
    { "id": "38", "title": "ğŸ‡°ğŸ‡² Comoros" },
    { "id": "39", "title": "ğŸ‡¨ğŸ‡¬ Congo (Brazzaville)" },
    { "id": "40", "title": "ğŸ‡¨ğŸ‡© Congo (Kinshasa)" },
    { "id": "41", "title": "ğŸ‡¨ğŸ‡· Costa Rica" },
    { "id": "42", "title": "ğŸ‡­ğŸ‡· Croatia" },
    { "id": "43", "title": "ğŸ‡¨ğŸ‡º Cuba" },
    { "id": "44", "title": "ğŸ‡¨ğŸ‡¾ Cyprus" },
    { "id": "45", "title": "ğŸ‡¨ğŸ‡¿ Czech Republic" },
    { "id": "46", "title": "ğŸ‡©ğŸ‡° Denmark" },
    { "id": "47", "title": "ğŸ‡©ğŸ‡¯ Djibouti" },
    { "id": "48", "title": "ğŸ‡©ğŸ‡² Dominica" },
    { "id": "49", "title": "ğŸ‡©ğŸ‡´ Dominican Republic" },
    { "id": "50", "title": "ğŸ‡ªğŸ‡¨ Ecuador" },
    { "id": "51", "title": "ğŸ‡ªğŸ‡¬ Egypt" },
    { "id": "52", "title": "ğŸ‡¸ğŸ‡» El Salvador" },
    { "id": "53", "title": "ğŸ‡¬ğŸ‡¶ Equatorial Guinea" },
    { "id": "54", "title": "ğŸ‡ªğŸ‡· Eritrea" },
    { "id": "55", "title": "ğŸ‡ªğŸ‡ª Estonia" },
    { "id": "56", "title": "ğŸ‡ªğŸ‡¹ Ethiopia" },
    { "id": "57", "title": "ğŸ‡«ğŸ‡¯ Fiji" },
    { "id": "58", "title": "ğŸ‡«ğŸ‡® Finland" },
    { "id": "59", "title": "ğŸ‡«ğŸ‡· France" },
    { "id": "60", "title": "ğŸ‡¬ğŸ‡¦ Gabon" },
    { "id": "61", "title": "ğŸ‡¬ğŸ‡² Gambia" },
    { "id": "62", "title": "ğŸ‡¬ğŸ‡ª Georgia" },
    { "id": "63", "title": "ğŸ‡©ğŸ‡ª Germany" },
    { "id": "64", "title": "ğŸ‡¬ğŸ‡­ Ghana" },
    { "id": "65", "title": "ğŸ‡¬ğŸ‡· Greece" },
    { "id": "66", "title": "ğŸ‡¬ğŸ‡© Grenada" },
    { "id": "67", "title": "ğŸ‡¬ğŸ‡¹ Guatemala" },
    { "id": "68", "title": "ğŸ‡¬ğŸ‡³ Guinea" },
    { "id": "69", "title": "ğŸ‡¬ğŸ‡¼ Guinea-Bissau" },
    { "id": "70", "title": "ğŸ‡¬ğŸ‡¾ Guyana" },
    { "id": "71", "title": "ğŸ‡­ğŸ‡¹ Haiti" },
    { "id": "72", "title": "ğŸ‡­ğŸ‡³ Honduras" },
    { "id": "73", "title": "ğŸ‡­ğŸ‡º Hungary" },
    { "id": "74", "title": "ğŸ‡®ğŸ‡¸ Iceland" },
    { "id": "75", "title": "ğŸ‡®ğŸ‡³ India" },
    { "id": "76", "title": "ğŸ‡®ğŸ‡© Indonesia" },
    { "id": "77", "title": "ğŸ‡®ğŸ‡· Iran" },
    { "id": "78", "title": "ğŸ‡®ğŸ‡¶ Iraq" },
    { "id": "79", "title": "ğŸ‡®ğŸ‡ª Ireland" },
    { "id": "80", "title": "ğŸ‡®ğŸ‡± Israel" },
    { "id": "81", "title": "ğŸ‡®ğŸ‡¹ Italy" },
    { "id": "82", "title": "ğŸ‡¯ğŸ‡² Jamaica" },
    { "id": "83", "title": "ğŸ‡¯ğŸ‡µ Japan" },
    { "id": "84", "title": "ğŸ‡¯ğŸ‡´ Jordan" },
    { "id": "85", "title": "ğŸ‡°ğŸ‡¿ Kazakhstan" },
    { "id": "86", "title": "ğŸ‡°ğŸ‡ª Kenya" },
    { "id": "87", "title": "ğŸ‡°ğŸ‡® Kiribati" },
    { "id": "88", "title": "ğŸ‡°ğŸ‡µ North Korea" },
    { "id": "89", "title": "ğŸ‡°ğŸ‡· South Korea" },
    { "id": "90", "title": "ğŸ‡½ğŸ‡° Kosovo" },
    { "id": "91", "title": "ğŸ‡°ğŸ‡¼ Kuwait" },
    { "id": "92", "title": "ğŸ‡°ğŸ‡¬ Kyrgyzstan" },
    { "id": "93", "title": "ğŸ‡±ğŸ‡¦ Laos" },
    { "id": "94", "title": "ğŸ‡±ğŸ‡» Latvia" },
    { "id": "95", "title": "ğŸ‡±ğŸ‡§ Lebanon" },
    { "id": "96", "title": "ğŸ‡±ğŸ‡¸ Lesotho" },
    { "id": "97", "title": "ğŸ‡±ğŸ‡· Liberia" },
    { "id": "98", "title": "ğŸ‡±ğŸ‡¾ Libya" },
    { "id": "99", "title": "ğŸ‡±ğŸ‡® Liechtenstein" },
    { "id": "100", "title": "ğŸ‡±ğŸ‡¹ Lithuania" },
    { "id": "101", "title": "ğŸ‡±ğŸ‡º Luxembourg" },
    { "id": "102", "title": "ğŸ‡²ğŸ‡° North Macedonia" },
    { "id": "103", "title": "ğŸ‡²ğŸ‡¬ Madagascar" },
    { "id": "104", "title": "ğŸ‡²ğŸ‡¼ Malawi" },
    { "id": "105", "title": "ğŸ‡²ğŸ‡¾ Malaysia" },
    { "id": "106", "title": "ğŸ‡²ğŸ‡» Maldives" },
    { "id": "107", "title": "ğŸ‡²ğŸ‡± Mali" },
    { "id": "108", "title": "ğŸ‡²ğŸ‡¹ Malta" },
    { "id": "109", "title": "ğŸ‡²ğŸ‡­ Marshall Islands" },
    { "id": "110", "title": "ğŸ‡²ğŸ‡· Mauritania" },
    { "id": "111", "title": "ğŸ‡²ğŸ‡º Mauritius" },
    { "id": "112", "title": "ğŸ‡²ğŸ‡½ Mexico" },
    { "id": "113", "title": "ğŸ‡«ğŸ‡² Micronesia" },
    { "id": "114", "title": "ğŸ‡²ğŸ‡© Moldova" },
    { "id": "115", "title": "ğŸ‡²ğŸ‡¨ Monaco" },
    { "id": "116", "title": "ğŸ‡²ğŸ‡³ Mongolia" },
    { "id": "117", "title": "ğŸ‡²ğŸ‡ª Montenegro" },
    { "id": "118", "title": "ğŸ‡²ğŸ‡¦ Morocco" },
    { "id": "119", "title": "ğŸ‡²ğŸ‡¿ Mozambique" },
    { "id": "120", "title": "ğŸ‡²ğŸ‡² Myanmar" },
    { "id": "121", "title": "ğŸ‡³ğŸ‡¦ Namibia" },
    { "id": "122", "title": "ğŸ‡³ğŸ‡· Nauru" },
    { "id": "123", "title": "ğŸ‡³ğŸ‡µ Nepal" },
    { "id": "124", "title": "ğŸ‡³ğŸ‡± Netherlands" },
    { "id": "125", "title": "ğŸ‡³ğŸ‡¿ New Zealand" },
    { "id": "126", "title": "ğŸ‡³ğŸ‡® Nicaragua" },
    { "id": "127", "title": "ğŸ‡³ğŸ‡ª Niger" },
    { "id": "128", "title": "ğŸ‡³ğŸ‡¬ Nigeria" },
    { "id": "129", "title": "ğŸ‡³ğŸ‡´ Norway" },
    { "id": "130", "title": "ğŸ‡´ğŸ‡² Oman" },
    { "id": "131", "title": "ğŸ‡µğŸ‡° Pakistan" },
    { "id": "132", "title": "ğŸ‡µğŸ‡¼ Palau" },
    { "id": "133", "title": "ğŸ‡µğŸ‡¸ Palestine" },
    { "id": "134", "title": "ğŸ‡µğŸ‡¦ Panama" },
    { "id": "135", "title": "ğŸ‡µğŸ‡¬ Papua New Guinea" },
    { "id": "136", "title": "ğŸ‡µğŸ‡¾ Paraguay" },
    { "id": "137", "title": "ğŸ‡µğŸ‡ª Peru" },
    { "id": "138", "title": "ğŸ‡µğŸ‡­ Philippines" },
    { "id": "139", "title": "ğŸ‡µğŸ‡± Poland" },
    { "id": "140", "title": "ğŸ‡µğŸ‡¹ Portugal" },
    { "id": "141", "title": "ğŸ‡¶ğŸ‡¦ Qatar" },
    { "id": "142", "title": "ğŸ‡·ğŸ‡´ Romania" },
    { "id": "143", "title": "ğŸ‡·ğŸ‡º Russia" },
    { "id": "144", "title": "ğŸ‡·ğŸ‡¼ Rwanda" },
    { "id": "145", "title": "ğŸ‡°ğŸ‡³ Saint Kitts and Nevis" },
    { "id": "146", "title": "ğŸ‡±ğŸ‡¨ Saint Lucia" },
    { "id": "147", "title": "ğŸ‡»ğŸ‡¨ Saint Vincent and the Grenadines" },
    { "id": "148", "title": "ğŸ‡¼ğŸ‡¸ Samoa" },
    { "id": "149", "title": "ğŸ‡¸ğŸ‡² San Marino" },
    { "id": "150", "title": "ğŸ‡¸ğŸ‡¹ Sao Tome and Principe" },
    { "id": "151", "title": "ğŸ‡¸ğŸ‡¦ Saudi Arabia" },
    { "id": "152", "title": "ğŸ‡¸ğŸ‡³ Senegal" },
    { "id": "153", "title": "ğŸ‡·ğŸ‡¸ Serbia" },
    { "id": "154", "title": "ğŸ‡¸ğŸ‡¨ Seychelles" },
    { "id": "155", "title": "ğŸ‡¸ğŸ‡± Sierra Leone" },
    { "id": "156", "title": "ğŸ‡¸ğŸ‡¬ Singapore" },
    { "id": "157", "title": "ğŸ‡¸ğŸ‡° Slovakia" },
    { "id": "158", "title": "ğŸ‡¸ğŸ‡® Slovenia" },
    { "id": "159", "title": "ğŸ‡¸ğŸ‡§ Solomon Islands" },
    { "id": "160", "title": "ğŸ‡¸ğŸ‡´ Somalia" },
    { "id": "161", "title": "ğŸ‡¿ğŸ‡¦ South Africa" },
    { "id": "162", "title": "ğŸ‡¸ğŸ‡¸ South Sudan" },
    { "id": "163", "title": "ğŸ‡ªğŸ‡¸ Spain" },
    { "id": "164", "title": "ğŸ‡±ğŸ‡° Sri Lanka" },
    { "id": "165", "title": "ğŸ‡¸ğŸ‡© Sudan" },
    { "id": "166", "title": "ğŸ‡¸ğŸ‡· Suriname" },
    { "id": "167", "title": "ğŸ‡¸ğŸ‡¿ Eswatini" },
    { "id": "168", "title": "ğŸ‡¸ğŸ‡ª Sweden" },
    { "id": "169", "title": "ğŸ‡¨ğŸ‡­ Switzerland" },
    { "id": "170", "title": "ğŸ‡¸ğŸ‡¾ Syria" },
    { "id": "171", "title": "ğŸ‡¹ğŸ‡¼ Taiwan" },
    { "id": "172", "title": "ğŸ‡¹ğŸ‡¯ Tajikistan" },
    { "id": "173", "title": "ğŸ‡¹ğŸ‡¿ Tanzania" },
    { "id": "174", "title": "ğŸ‡¹ğŸ‡­ Thailand" },
    { "id": "175", "title": "ğŸ‡¹ğŸ‡± Timor-Leste" },
    { "id": "176", "title": "ğŸ‡¹ğŸ‡¬ Togo" },
    { "id": "177", "title": "ğŸ‡¹ğŸ‡´ Tonga" },
    { "id": "178", "title": "ğŸ‡¹ğŸ‡¹ Trinidad and Tobago" },
    { "id": "179", "title": "ğŸ‡¹ğŸ‡³ Tunisia" },
    { "id": "180", "title": "ğŸ‡¹ğŸ‡· Turkey" },
    { "id": "181", "title": "ğŸ‡¹ğŸ‡² Turkmenistan" },
    { "id": "182", "title": "ğŸ‡¹ğŸ‡» Tuvalu" },
    { "id": "183", "title": "ğŸ‡ºğŸ‡¬ Uganda" },
    { "id": "184", "title": "ğŸ‡ºğŸ‡¦ Ukraine" },
    { "id": "185", "title": "ğŸ‡¦ğŸ‡ª United Arab Emirates" },
    { "id": "186", "title": "ğŸ‡¬ğŸ‡§ United Kingdom" },
    { "id": "187", "title": "ğŸ‡ºğŸ‡¸ United States of America" },
    { "id": "188", "title": "ğŸ‡ºğŸ‡¾ Uruguay" },
    { "id": "189", "title": "ğŸ‡ºğŸ‡¿ Uzbekistan" },
    { "id": "190", "title": "ğŸ‡»ğŸ‡º Vanuatu" },
    { "id": "191", "title": "ğŸ‡»ğŸ‡¦ Vatican City" },
    { "id": "192", "title": "ğŸ‡»ğŸ‡ª Venezuela" },
    { "id": "193", "title": "ğŸ‡»ğŸ‡³ Vietnam" },
    { "id": "194", "title": "ğŸ‡¾ğŸ‡ª Yemen" },
    { "id": "195", "title": "ğŸ‡¿ğŸ‡² Zambia" },
    { "id": "196", "title": "ğŸ‡¿ğŸ‡¼ Zimbabwe" }
]

const AddLocation = () => {
    const [input, setInput] = useState(null);
    const [data, setData] = useState(null);
    const [valid, setValid] = useState(false)
    const filterData = () => {
        
        if (input && input != " ") {
            return COUNTRIES.filter(country => country.title.includes(input)).slice(0, 7)
        }
        return null
    }

    useEffect(() => {
        setData(filterData())
    }, [input])

    const onChangeText = (text) => {
        setInput(text)
    }

    return (
        <View>
            <View style={{
                display: "flex",
                flexDirection: 'row',
                alignItems: 'center',
       
            }}>
                <TextInput
                    theme={{
                        colors: {
                            onSurfaceVariant: COLORS.halfGrey,
                        }
                    }}
                    label='Country'
                    activeOutlineColor='black'
                    mode='outlined'
                    style={TEXT_STYLES.textInput}
                    outlineStyle={TEXT_STYLES.textInputOutline}
                    value={input}
                    onChangeText={text => setInput(text)}
                />
                <TouchableOpacity style={{
                    height: 50,
                    width: 50,
                    backgroundColor: valid ? COLORS.mainTheme : COLORS.halfGrey,
                    borderRadius: 15,
                    marginHorizontal: 15,
                    ...FLEX_CENTERED
                }}>
                    <StyleText
                        style={{ color: 'white' }}
                        fontSize={27}
                        text="+"
                    />
                </TouchableOpacity>
            </View>
            <FlatList
                data={data}
                renderItem={(item, index) => (
                    <TouchableOpacity onPress={() => {
                        setInput(item.item.title)
                        setValid(true)
                        setData(null)
                    }}>
                        <Text>{item.item.title}</Text>
                    </TouchableOpacity>
                )}
                keyExtractor={item => item.id}
            />
        </View>
    )
}

export default AddLocation

const styles = StyleSheet.create({})